{% extends "base.html" %}

{% load static %}
{% load tag_library %}

{% block page_css %}{% endblock page_css %}

{% block main %}
<div class="row">

    {% include "elements/messages-section.html" %}

    <div class="col-12 card">
        <div class="row">
            <div class="col">
                <img src="{% if object.poster %}{{object.poster.url}}{% else %}{% static "no-banner.jpg" %}{% endif %}" alt="{{object.name}}" class="img-fluid">
            </div>
            <div class="col-lg-5">
                <div class="pt-3">
                    <h2 class="font-weight-bold">{{object.name}}</h2>
                    <div class="row mb-2" style="width: 100%;">
                        <div class="col-6">
                            <li class="list-group mt-1">
                                <i class="text-black-50 mt-50"><i class="feather icon-tag"></i> هزینه شرکت در این دوره: <span class="{% if object.price <= 0 %}text-warning{% endif %}">{{object.price|not_zero}}</span></i>
                                <i class="text-black-50 mt-50"><i class="feather icon-map-pin"></i> محل برگزاری: {{object.location}}</i>
                                <i class="text-black-50 mt-50">برگزار کننده این برنامه: <img src={% if object.accelerator.logo %}{{object.accelerator.logo.url}}{% else %}{% static "no-banner.jpg" %}{% endif %} alt={{object.accelerator.name}} class="img-thumbnail" width="100"></i>
                            </li>
                        </div>
                        <div class="col-6 pl-5">
                            <li class="list-group mt-1">
                                <i class="text-black-50 mt-50"><i class="fa fa-circle-o"></i> شروع: {{object.start_date|to_jalali}}</i>
                                <i class="text-black-50 mt-50"><i class="fa fa-circle-o"></i> پایان مسیر: {{object.start_date|to_jalali}}</i>
                                <i class="text-black-50 mt-50"><i class="fa fa-circle-o"></i> مهلت ثبت‌نام: {{object.start_date|to_jalali}}</i>
                                <i class="text-black-50 mt-50"><i class="fa fa-circle-o"></i> شروع برنامه: {{object.start_date|to_jalali}}</i>
                            </li>
                        </div>
                    </div>

                    <!-- <table class="table table-responsive-md mt-1 table-bordered">
                        <thead>
                            <tr class="text-center text-dark">
                                <th>هزینه</th>
                                <th>محل برگزاری</th>
                                <th>برگزار کننده</th>
                                <th>آغاز ثبت‌نام</th>
                                <th>پایان مسیر</th>
                                <th>مهلت ثبت‌نام</th>
                                <th>شروع برنامه</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="text-center">
                                <td>{{object.price|not_zero}}</td>
                                <td>{{object.location}}</td>
                                <td><img src={% if object.accelerator.logo %}{{object.accelerator.logo.url}}{% else %}{% static "no-banner.jpg" %}{% endif %} alt={{object.accelerator.name}} class="img-thumbnail" width="75"></td>
                                <td>{{object.start_date|to_jalali}}</td>
                                <td>{{object.start_date|to_jalali}}</td>
                                <td>{{object.start_date|to_jalali}}</td>
                                <td>{{object.start_date|to_jalali}}</td>
                            </tr>
                        </tbody>
                    </table> -->

                </div>
            </div>
        </div>
    </div>

    <div class="col-12">
        <!-- Detail and registration button -->
        <div class="card">
            <div class="card-header">
                <h4 class="card-title"><i class="fa fa-hashtag"></i> وضعیت تکمیل درخواست ثبت‌نام در مسیر</h4>
            </div>
            <div class="card-body">
                <div class="card-content">
                    <div class="text-right">
                        {% if registration_obj.status != "n" %}
                        <a class="btn btn-gradient-bg bg-gradient-info text-white mb-2">{{registration_obj.get_status_display}}</a>
                        {% else %}
                            {% if registration_obj.is_valid_registration_period %}
                            <a href={% url "quiz:pre-register-required" registration_obj.road.uuid %} class="btn btn-gradient-bg bg-gradient-success mb-2">ادامه تکمیل درخواست!</a>
                            {% else %}
                            <a href={% url "quiz:pre-register-required" registration_obj.road.uuid %} class="btn btn-gradient-bg bg-gradient-danger mb-2">ادامه تکمیل درخواست!</a>
                            {% endif %}
                        {% endif %}
                    </div>

                    <table class="table table-responsive-md mb-0 border">
                        <thead>
                            <tr class="table-secondary text-center text-dark">
                                
                                <th class="col-4">آخرین وضعیت درخواست شما</th>
                                <th>تکمیل پروفایل شخصی</th>
                                <th>انجام آزمون شخصیت</th>

                                {% if registration_obj.team_or_individual != "i" %}
                                <th>تکمیل اطلاعات تیم توسط سرپرست‌تیم</th>
                                <th>ثبت اطلاعات اعضای تیم</th>
                                {% else %}
                                <th>انجام چالش ورودی</th>
                                {% endif %}

                                <th>ثبت اطلاعات و دموی ایده/محصول</th>

                                {% if registration_obj.team_or_individual != "i" %}
                                <th>تکمیل مراحل توسط اعضای تیم</th>
                                {% endif %}

                                {% if registration_obj.status != "n" %}
                                <th>تاریخ تکمیل فرایند ثبت نام</th>
                                {% else %}
                                <th>تاریخ شروع فرایند ثبت‌نام</th>
                                {% endif %}

                                <th>مهلت باقی مانده برای ثبت درخواست</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="text-center">
                                <!-- وضعیت درخواست -->
                                <td class="border table-light">{{registration_obj.get_status_display}}</td>
                                <!-- تکمیل بودن پروفایل -->
                                <td class="border ">{% if request.user.is_profile_complete %}<span class="badge badge-success"><i class="fa fa-check"></i></span>{% else %}<span class="badge badge-danger"><i class="fa fa-times"></i></span>{% endif %}</td>
                                <!-- انجام آزمون شخصیت -->
                                <td class="border ">{% if request.user.user_of_personal_test.exists %}<span class="badge badge-success"><i class="fa fa-check"></i></span>{% else %}<span class="badge badge-danger"><i class="fa fa-times"></i></span>{% endif %}</td>

                                {% if registration_obj.team_or_individual != "i" %}
                                <!-- تیم؟ -->
                                <td class="border ">{% if request.user.user_of_team_member.first %}<span class="badge badge-success"><i class="fa fa-check"></i></span>{% else %}<span class="badge badge-danger"><i class="fa fa-times"></i></span>{% endif %}</td>
                                <!-- تعداد اعضای تیم؟ -->
                                <td class="border ">{% if request.user.user_of_team_member.first.team.team_member_count > 1 %}<span class="badge badge-success">{{ request.user.user_of_team_member.first.team.team_member_count }} <i class="fa fa-check"></i></span>{% else %}<span class="badge badge-danger">{{ request.user.user_of_team_member.first.team.team_member_count }} <i class="fa fa-times"></i></span>{% endif %}</td>
                                {% else %}
                                <!-- چالش ورودی -->
                                <td class="border ">{% if request.user.user_of_pre_register_task_response.first %}<span class="badge badge-success"><i class="fa fa-check"></i></span>{% else %}<span class="badge badge-danger"><i class="fa fa-times"></i></span>{% endif %}</td>
                                {% endif %}

                                <!-- ایده یا محصول -->
                                {% if registration_obj.team_or_individual != "i" %}
                                <td class="border ">{% if request.user.user_of_team_member.first.team.team_of_plan.first %}<span class="badge badge-success"><i class="fa fa-check"></i></span>{% else %}<span class="badge badge-danger"><i class="fa fa-times"></i></span>{% endif %}</td>
                                {% else %}
                                <td class="border ">{% if request.user.user_of_plan.first %}<span class="badge badge-success"><i class="fa fa-check"></i></span>{% else %}<span class="badge badge-danger"><i class="fa fa-times"></i></span>{% endif %}</td>
                                {% endif %}

                                <!-- تکمیل پروفایل تمام اعضای تیم -->
                                {% if registration_obj.team_or_individual != "i" %}
                                <td class="border ">{% if request.user.user_of_team_member.first.team.all_users_completed_registration %}<span class="badge badge-success"><i class="fa fa-check"></i></span>{% else %}<span class="badge badge-danger"><i class="fa fa-times"></i></span>{% endif %}</td>
                                {% endif %}

                                {% if registration_obj.status != "n" %}
                                <!-- تاریخ اخرین تغییر کاربر -->
                                <td class="border ">{{registration_obj.client_last_response_date|to_jalali}}</th>
                                <!-- وضعیت ارسال شده درخواست -->
                                <td class="border">ارسال شد<i class="fa fa-check text-success"></i></th>
                                {% else %}
                                <!-- زمان تکمیل درخواست -->
                                <td class="border ">{{registration_obj.complete_registration_date|to_jalali}}</th>
                                <!-- زمان باقی مانده برای تکمیل درخواست -->
                                <td class="border">{% if registration_obj.is_valid_registration_period %}{{registration_obj.is_valid_registration_period}} روز{% else %}<span class="badge badge-danger"><i class="fa fa-clock-o"></i></span>{% endif %}</th>
                                {% endif %}
                            </tr>
                        </tbody>
                    </table>
                    
                </div>
            </div>
        </div>
    </div>

    <div class="col-12">
        <div class="row">
            <div class="col-lg-6">
                <!-- FAQ -->
                <div class="card">
                    <div class="card-header">
                        <h4 class="card-title"><i class="fa fa-question-circle"></i> سوالات متداول</h4>
                    </div>
                    <div class="card-body">
                        <div class="card-content">
                            <div class="accordion search-content-info" id="accordionExample">
                                <div class="collapse-margin search-content mt-0">
                                    <div class="card-header" id="headingOne" role="button" data-toggle="collapse" data-target="#collapseOne" aria-expanded="false" aria-controls="collapseOne">
                                        <span class="lead collapse-title">آیا می‌توانیم در این برنامه به صورت آنلاین شرکت کنیم؟</span>
                                    </div>
                                    <div id="collapseOne" class="collapse" aria-labelledby="headingOne" data-parent="#accordionExample">
                                        <div class="card-body">
                                            این متن باید توسط برگزارکننده برنامه آماده شود .
                                        </div>
                                    </div>
                                </div>
                                <div class="collapse-margin">
                                    <div class="card-header" id="headingTwo" role="button" data-toggle="collapse" data-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                                        <span class="lead collapse-title collapsed">
                                            گام‌ها و آزمون های دیجی‌نکست دارای مدال هستند؟
                                        </span>
                                    </div>
                                    <div id="collapseTwo" class="collapse" aria-labelledby="headingTwo" data-parent="#accordionExample">
                                        <div class="card-body">
                                            این متن باید توسط برگزارکننده برنامه آماده شود .
                                            این متن باید توسط برگزارکننده برنامه آماده شود .
                                        </div>
                                    </div>
                                </div>
                                <div class="collapse-margin search-content">
                                    <div class="card-header" id="headingThree" role="button" data-toggle="collapse" data-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                                        <span class="lead collapse-title collapsed">
                                            چجوری به دریافت سرمایه برسم؟
                                        </span>
                                    </div>
                                    <div id="collapseThree" class="collapse" aria-labelledby="headingThree" data-parent="#accordionExample">
                                        <div class="card-body">
                                            این متن باید توسط برگزارکننده برنامه آماده شود .
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- About accelerator -->
                <!-- <div class="card">
                    <div class="card-header">
                        <h4 class="card-title"><i class="fa fa-question-circle"></i> میزبان این برنامه:</h4>
                    </div>
                    <div class="card-body pb-1">
                        <div class="card-content text-dark">
                            <ul class="list-inline row justify-content-center">
                                <li><img src={% if object.accelerator.logo %}{{object.accelerator.logo.url}}{% else %}{% static "no-banner.jpg" %}{% endif %} alt={{object.accelerator.name}} class="img-thumbnail" width="100"></li>
                                <li class="ml-2">{{object.accelerator.name}}</li>
                                <li class="ml-2"><span class="badge badge-danger">{{object.accelerator.get_type_display}}</span></li>
                            </ul>

                            <p class="mt-3">{{object.accelerator.short_description}}</p>
                        </div>
                    </div>
                </div> -->
            </div>

        </div>
    </div>

</div>
{% endblock main %}

{% block page_js %}{% endblock page_js %}