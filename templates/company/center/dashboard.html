{% extends "base.html" %}

{% load static %}
{% load tag_library %}

{% block page_css %}
<link rel="stylesheet" type="text/css" href={% static "admin-theme/app-assets/css-rtl/pages/dashboard-analytics.css" %}>
<link rel="stylesheet" type="text/css" href={% static "admin-theme/app-assets/css-rtl/pages/card-analytics.css" %}>
{% endblock page_css %}

{% block main %}
<div class="row">

	{% include "elements/messages-section.html" %}

	{% if request.user.is_center_staff %}
	<div class="card bg-transparent shadow-none border-0">
		<div class="card-body row p-0 pb-3">
			<div class="col-12">
				<h3>Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒØ¯ØŒ {{request.user.get_full_name}} ğŸ‘‹ğŸ»</h3>
				<div class="col-12 col-lg-7">
					<p>Ø¨Ø±Ø§ÛŒ Ø´Ù…Ø§ Ù„ÛŒØ³ØªÛŒ Ø§Ø² Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ù‡Ø§ÛŒ ØªÛŒÙ… Ù‡Ø§ Ùˆ Ø§ÙØ±Ø§Ø¯ Ø¢Ù…Ø§Ø¯Ù‡ Ú©Ø±Ø¯ÛŒÙ…ØŒ Ú©Ù‡ Ù…ÛŒØªÙˆÙ†ÛŒØ¯ Ø§Ø² Ø§ÛŒÙ† ØµÙØ­Ù‡ Ø®Ù„Ø§ØµÙ‡ Ø§ÙˆÙ† Ù‡Ø§Ø±Ùˆ Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ú©Ù†ÛŒ. Ø§Ú¯Ø± Ù†ÛŒØ§Ø² Ø¨Ù‡ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¨ÛŒØ´ØªØ± Ø¯Ø§Ø±ÛŒ ÙˆØ§Ø±Ø¯ Ø¨Ø®Ø´ Ø¬Ø²Ø¦ÛŒØ§Øª Ù‡Ø±Ú©Ø¯ÙˆÙ… Ø´Ùˆ Ùˆ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¨ÛŒØ´ØªØ±ÛŒ Ø¯Ø±Ø¨Ø§Ø±Ù‡ Ù‡Ø± Ø¯Ø±Ø®ÙˆØ§Ø³ØªÛŒ Ú©Ù‡ Ù…ÛŒØ®ÙˆØ§ÛŒ Ù¾ÛŒØ¯Ø§ Ú©Ù†.</p>
				</div>
				<div class="d-flex justify-content-between flex-wrap gap-3 me-5">
					<div class="d-flex align-items-center gap-3 me-4 me-sm-0">
						<span class="bg-label-primary p-2 rounded">
							<i class="ti ti-table-heart ti-xl"></i>
						</span>
						<div class="content-right">
							<p class="mb-0">Ø¨Ø±Ù†Ø§Ù…Ù‡ Ù‡Ø§ÛŒ Ø¨Ø±Ú¯Ø²Ø§Ø± Ø´Ø¯Ù‡</p>
							<h4 class="text-primary mb-0">{{roads_count}}
								<small class="text-muted">Ø¨Ø±Ù†Ø§Ù…Ù‡</small>
							</h4>
						</div>
					</div>
					<div class="d-flex align-items-center gap-3">
						<span class="bg-label-success p-2 rounded">
							<i class="ti ti-run ti-xl"></i>
						</span>
						<div class="content-right">
							<p class="mb-0">Ø¨Ø±Ù†Ø§Ù…Ù‡ Ù‡Ø§ÛŒ ÙØ¹Ø§Ù„</p>
							<h4 class="text-success mb-0">{{active_roads_count}}
								<small class="text-muted">Ø¨Ø±Ù†Ø§Ù…Ù‡</small>
							</h4>
						</div>
					</div>
					<div class="d-flex align-items-center gap-3">
						<span class="bg-label-primary p-2 rounded">
							<i class="ti ti-box-padding ti-xl"></i>
						</span>
						<div class="content-right">
							<p class="mb-0">ØªØ¹Ø¯Ø§Ø¯ Ú©Ù„ Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ù‡Ø§</p>
							<h4 class="text-primary mb-0">{{requests_count}}
								<small class="text-muted">Ø¯Ø±Ø®ÙˆØ§Ø³Øª</small>
							</h4>
						</div>
					</div>
					<div class="d-flex align-items-center gap-3">
						<span class="bg-label-primary p-2 rounded">
							<i class="ti ti-percentage ti-xl"></i>
						</span>
						<div class="content-right">
							<p class="mb-0">Ø¯Ø±ØµØ¯ Ù‚Ø¨ÙˆÙ„ÛŒ Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ù‡Ø§</p>
							<h4 class="text-primary mb-0">{{approve_percentage}}
								<small class="text-muted">Ø¯Ø±ØµØ¯</small>
							</h4>
						</div>
					</div>
				</div>

				<h3 class="mt-4">Ø¢Ù…Ø§Ø± Ù…Ø±Ø¨ÙˆØ· Ø¨Ù‡ Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ù‡Ø§</h3>
				<div class="d-flex justify-content-between flex-wrap gap-3 me-5">
					<div class="d-flex align-items-center gap-3 me-4 me-sm-0">
						<span class="bg-label-primary p-2 rounded">
							<i class="ti ti-user ti-xl"></i>
						</span>
						<div class="content-right">
							<p class="mb-0">Ø«Ø¨Øª Ù†Ø§Ù… Ù‡Ø§ÛŒ Ø´Ø®ØµÛŒ</p>
							<h4 class="text-primary mb-0">{{personal_requests_count}}
								<small class="text-muted">Ø¯Ø±Ø®ÙˆØ§Ø³Øª</small>
							</h4>
						</div>
					</div>
					<div class="d-flex align-items-center gap-3">
						<span class="bg-label-primary p-2 rounded">
							<i class="ti ti-users ti-xl"></i>
						</span>
						<div class="content-right">
							<p class="mb-0">Ø«Ø¨Øª Ù†Ø§Ù… Ù‡Ø§ÛŒ ØªÛŒÙ…ÛŒ</p>
							<h4 class="text-primary mb-0">{{team_requests_count}}
								<small class="text-muted">Ø¯Ø±Ø®ÙˆØ§Ø³Øª</small>
							</h4>
						</div>
					</div>
					<div class="d-flex align-items-center gap-3">
						<span class="bg-label-success p-2 rounded">
							<i class="ti ti-heart ti-xl"></i>
						</span>
						<div class="content-right">
							<p class="mb-0">ØªÚ©Ù…ÛŒÙ„ Ø«Ø¨Øª Ù†Ø§Ù…</p>
							<h4 class="text-success mb-0">{{complete_requests}}
								<small class="text-muted">Ø¯Ø±Ø®ÙˆØ§Ø³Øª</small>
							</h4>
						</div>
					</div>
					<div class="d-flex align-items-center gap-3">
						<span class="bg-label-danger p-2 rounded">
							<i class="ti ti-heart-broken ti-xl"></i>
						</span>
						<div class="content-right">
							<p class="mb-0">Ø«Ø¨Øª Ù†Ø§Ù… Ù†Ø§Ù‚Øµ</p>
							<h4 class="text-danger mb-0">{{incomplete_requests}}
								<small class="text-muted">Ø¯Ø±Ø®ÙˆØ§Ø³Øª</small>
							</h4>
						</div>
					</div>
				</div>

				<div class="d-flex flex-wrap gap-3 me-5 mt-4">
					<div class="d-flex align-items-center gap-3 me-4 me-sm-0">
						<span class="bg-label-primary p-2 rounded">
							<i class="ti ti-user ti-xl"></i>
						</span>
						<div class="content-right">
							<p class="mb-0">Ú†Ø§Ù„Ø´ Ù‡Ø§ÛŒ Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯Ù‡</p>
							<h4 class="text-primary mb-0">{{all_challenge}}
								<small class="text-muted">Ø¯Ø±Ø®ÙˆØ§Ø³Øª</small>
							</h4>
						</div>
					</div>
					<div class="d-flex align-items-center gap-3 mx-5">
						<span class="bg-label-primary p-2 rounded">
							<i class="ti ti-users ti-xl"></i>
						</span>
						<div class="content-right">
							<p class="mb-0">Ø¢Ø²Ù…ÙˆÙ† Ù‡Ø§ÛŒ Ø´Ø®ØµÛŒØª Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯Ù‡</p>
							<h4 class="text-primary mb-0">{{all_personal_test}}
								<small class="text-muted">Ø§Ø² {{personal_requests_count}} Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø´Ø®ØµÛŒ</small>
							</h4>
						</div>
					</div>
				</div>
			</div>

			<div class="d-flex flex-wrap gap-3 me-5 justify-content-center mt-5">
				<!-- team_vs_individual_polar -->
				<div class="d-flex align-items-center gap-3">
					<div class="card bg-transparent shadow-none">
						<h5 class="card-header">Ù†Ø³Ø¨Øª Ø«Ø¨Øª Ù†Ø§Ù… Ù‡Ø§ÛŒ ØªÛŒÙ…ÛŒ Ø¨Ù‡ Ø´Ø®ØµÛŒ</h5>
						<div class="card-body">
							<canvas class="chartjs mb-4" data-height="350" id="team_vs_individual_polar"></canvas>
							<ul class="doughnut-legend d-flex justify-content-around ps-0 mb-2 pt-1">
								<li class="ct-series-0 d-flex flex-column">
									<h5 class="mb-0">Ø´Ø®ØµÛŒ</h5>
									<span class="badge badge-dot my-2 cursor-pointer rounded-pill" style="background-color: #FDAC34; width: 35px; height: 6px"></span>
									{% comment %} <div class="text-muted">80 %</div> {% endcomment %}
								</li>
								<li class="ct-series-1 d-flex flex-column">
									<h5 class="mb-0">ØªÛŒÙ…ÛŒ</h5>
									<span class="badge badge-dot my-2 cursor-pointer rounded-pill" style="background-color: #84D0FF; width: 35px; height: 6px"></span>
									{% comment %} <div class="text-muted">10 %</div> {% endcomment %}
								</li>
							</ul>
						</div>
					</div>
				</div>
				<!-- /team_vs_individual_polar -->
	
				<!-- complete_vs_incomplete_polar -->
				<div class="d-flex align-items-center gap-3">
					<div class="card bg-transparent shadow-none">
						<h5 class="card-header">Ù†Ø³Ø¨Øª Ø«Ø¨Øª Ù†Ø§Ù… Ù‡Ø§ÛŒ Ú©Ø§Ù…Ù„ Ø¨Ù‡ Ù†Ø§Ù‚Øµ</h5>
						<div class="card-body">
							<canvas class="chartjs mb-4" data-height="350" id="complete_vs_incomplete_polar"></canvas>
							<ul class="doughnut-legend d-flex justify-content-around ps-0 mb-2 pt-1">
								<li class="ct-series-0 d-flex flex-column">
									<h5 class="mb-0">Ú©Ø§Ù…Ù„</h5>
									<span class="badge badge-dot my-2 cursor-pointer rounded-pill bg-success" style="width: 35px; height: 6px"></span>
									{% comment %} <div class="text-muted">80 %</div> {% endcomment %}
								</li>
								<li class="ct-series-1 d-flex flex-column">
									<h5 class="mb-0">Ù†Ø§Ù‚Øµ</h5>
									<span class="badge badge-dot my-2 cursor-pointer rounded-pill bg-danger" style="width: 35px; height: 6px"></span>
									{% comment %} <div class="text-muted">10 %</div> {% endcomment %}
								</li>
							</ul>
						</div>
					</div>
				</div>
				<!-- /complete_vs_incomplete_polar -->
			</div>

		</div>
	</div>
	{% else %}
	<div class="col-12">
		<div class="card bg-gradient-danger">
			<div class="card-header d-flex align-items-start pb-0">
				<div class="mx-auto">
					<h2 class="text-bold-700 mb-1 text-white">Ø¨Ø±Ø§ÛŒ Ø´Ù…Ø§ Ø¯Ø±Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ Ù‡ÛŒÚ† Ù…Ø±Ú©Ø²ÛŒ ØªØ¹Ø±ÛŒÙ Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª!</h2>
				</div>
			</div>
		</div>
	</div>

	<div class="col-12">
		<div class="card">
			<div class="card-content">
				<div class="card-body">
					<p class="">
						<h2 class="ml-1 mb-1 font-weight-bold">Ú†Ù‡ Ø¨Ø§ÛŒØ¯ Ú©Ø±Ø¯ØŸ</h2>
						<ul class="list-group">
							<li class="list-group-item">Û±. Ø«Ø¨Øª ØªÛŒÚ©Øª Ø¨Ø±Ø§ÛŒ Ù¾Ø´ØªÛŒØ¨Ø§Ù† ÙˆØ¨ Ø³Ø§ÛŒØª.</li>
						</ul>
					</p>
				</div>
			</div>
		</div>
	</div>
	{% endif %}

</div>
{% endblock main %}

{% block page_js %}
<script src={% static "assets-vuexy/vendor/libs/chartjs/chartjs.js" %}></script>

<script>
	  // Color Variables
	  const purpleColor = '#836AF9',
	  yellowColor = '#ffe800',
	  cyanColor = '#28dac6',
	  orangeColor = '#FF8132',
	  orangeLightColor = '#FDAC34',
	  oceanBlueColor = '#299AFF',
	  greyColor = '#4F5D70',
	  greyLightColor = '#EDF1F4',
	  blueColor = '#2B9AFF',
	  blueLightColor = '#84D0FF';
  
	let cardColor, headingColor, labelColor, borderColor, legendColor;
</script>

<script>
	const team_vs_individual_polar = document.getElementById('team_vs_individual_polar');
	if (team_vs_individual_polar) {
	  const doughnutChartVar = new Chart(team_vs_individual_polar, {
		type: 'doughnut',
		data: {
		  labels: ['Ø´Ø®ØµÛŒ', 'ØªÛŒÙ…ÛŒ',],
		  datasets: [
			{
			  data: [{{personal_requests_count}}, {{team_requests_count}}],
			  backgroundColor: [orangeLightColor, blueLightColor],
			  borderWidth: 0,
			  pointStyle: 'rectRounded'
			}
		  ]
		},
		options: {
		  responsive: true,
		  animation: {
			duration: 500
		  },
		  cutout: '0%',
		  plugins: {
			legend: {
			  display: false
			},
			tooltip: {
			  callbacks: {
				label: function (context) {
				  const label = context.labels || '',
					value = context.parsed;
				  const output = ' ' + label + ' : ' + value + ' Ø¯Ø±Ø®ÙˆØ§Ø³Øª';
				  return output;
				}
			  },
			  // Updated default tooltip UI
			  rtl: isRtl,
			  backgroundColor: cardColor,
			  titleColor: headingColor,
			  bodyColor: legendColor,
			  borderWidth: 1,
			  borderColor: borderColor
			}
		  }
		}
	  });
	}
</script>

<script>
	const complete_vs_incomplete_polar = document.getElementById('complete_vs_incomplete_polar');
	if (complete_vs_incomplete_polar) {
	  const doughnutChartVar = new Chart(complete_vs_incomplete_polar, {
		type: 'doughnut',
		data: {
		  labels: ['Ù†Ø§Ù‚Øµ', 'ØªÚ©Ù…ÛŒÙ„ Ø´Ø¯Ù‡',],
		  datasets: [
			{
			  data: [{{incomplete_requests}}, {{complete_requests}}],
			  backgroundColor: [config.colors.danger, config.colors.success],
			  borderWidth: 0,
			  pointStyle: 'rectRounded'
			}
		  ]
		},
		options: {
		  responsive: true,
		  animation: {
			duration: 500
		  },
		  cutout: '0%',
		  plugins: {
			legend: {
			  display: false
			},
			tooltip: {
			  callbacks: {
				label: function (context) {
				  const label = context.labels || '',
					value = context.parsed;
				  const output = ' ' + label + ' : ' + value + ' Ø¯Ø±Ø®ÙˆØ§Ø³Øª';
				  return output;
				}
			  },
			  // Updated default tooltip UI
			  rtl: isRtl,
			  backgroundColor: cardColor,
			  titleColor: headingColor,
			  bodyColor: legendColor,
			  borderWidth: 1,
			  borderColor: borderColor
			}
		  }
		}
	  });
	}
</script>
{% endblock page_js %}