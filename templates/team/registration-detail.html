{% extends "base.html" %}

{% load static %}
{% load crispy_forms_tags %}
{% load tag_library %}

{% block page_css %}
<link rel="stylesheet" type="text/css" href={% static "admin-theme/app-assets/vendors/css/forms/select/select2.min.css" %}>
<link rel="stylesheet" type="text/css" href={% static "admin-theme/app-assets/css-rtl/pages/faq.css" %}>
{% endblock page_css %}

{% block main %}
<div class="row">

    {% include "elements/messages-section.html" %}



    <div class="col-md-6">
        <div class="card">
            <div class="card-header">
                <h4 class="card-title">اطلاعات کلی درخواست</h4>
            </div>
            <div class="card-body">
                <div class="card-content">
                    <table class="table table-responsive-md mb-0 text-dark">
                        <thead>
                            <tr class="">
                                <th scope="col">نوع ثبت نام</th>
                                {% if object.team_or_individual in "ta" %}
                                <th scope="col">تیم</th>
                                {% endif %}
                                <th scope="col">کاربر</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                {% if object.team_or_individual in "ta" %}
                                <td class="table-warning">تیمی</td>
                                <td class="">{{object.team|default:"***"}}</td>
                                {% else %}
                                <td class="table-info">شخصی</td>
                                {% endif %}
                                <td class="">{{object.user.get_full_name}}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <div class="col-md-6">
        <div class="card">
            <div class="card-header">
                <h4 class="card-title">اطلاعات ایده</h4>
            </div>
            <div class="card-body">
                <div class="card-content">
                    <table class="table table-responsive-md mb-0 text-dark">
                        <thead>
                            <tr>
                                <th>نام ایده</th>
                                <th>توضیحات</th>
                                <th>دارای کمینه</th>
                                <th>سطح محصول</th>
                                <th>فیلم ارسال شده</th>
                                <th>فایل pitch deck</th>
                                {% comment %} <th>عملیات</th> {% endcomment %}
                            </tr>
                        </thead>
                        <tbody>
                            {% if object.team_or_individual in "at" %}
                                {% for idea in object.team.team_of_plan.all %}
                                    <tr>
                                        <td class="font-weight-bold">{{idea.name|truncatechars:25}}</td>
                                        <td>{{idea.description|truncatechars:25}}</td>
                                        <td>{% if idea.status == "m" %}<span class="badge badge-success"><i class="fa fa-check"></i></span>{% else %}<span class="badge badge-danger"><i class="fa fa-times"></i></span>{% endif %}</td>
                                        <td>{{idea.get_progress_status_display}}</td>
                                        <td>{% if idea.video %}<a class="badge badge-primary" href="{{idea.video.url}}"><i class="fa fa-eye"></i> مشاهده</a>{% else %}<span class="badge badge-danger"><i class="fa fa-times"></i></span>{% endif %}</td>
                                        <td>{% if idea.pitch_deck %}<a class="badge badge-primary" href="{{idea.pitch_deck.url}}"><i class="fa fa-eye"></i> مشاهده</a>{% else %}<span class="badge badge-danger"><i class="fa fa-times"></i></span>{% endif %}</td>
                                        
                                        {% comment %} <td><a href="" class="badge badge-info"><i class="feather icon-edit-2"></i> ویرایش</a></td> {% endcomment %}
                                    </tr>
                                {% endfor %}
                            {% else %}
                                {% for idea in object.user.user_of_plan.all %}
                                    <tr>
                                        <td class="font-weight-bold">{{idea.name|truncatechars:25}}</td>
                                        <td>{{idea.description|truncatechars:25}}</td>
                                        <td>{% if idea.status == "m" %}<span class="badge badge-success"><i class="fa fa-check"></i></span>{% else %}<span class="badge badge-danger"><i class="fa fa-times"></i></span>{% endif %}</td>
                                        <td>{{idea.get_progress_status_display}}</td>
                                        <td>{% if idea.video %}<a class="badge badge-primary" href="{{idea.video.url}}"><i class="fa fa-eye"></i> مشاهده</a>{% else %}<span class="badge badge-danger"><i class="fa fa-times"></i></span>{% endif %}</td>
                                        <td>{% if idea.pitch_deck %}<a class="badge badge-primary" href="{{idea.pitch_deck.url}}"><i class="fa fa-eye"></i> مشاهده</a>{% else %}<span class="badge badge-danger"><i class="fa fa-times"></i></span>{% endif %}</td>
                                        
                                        {% comment %} <td><a href="" class="badge badge-info"><i class="feather icon-edit-2"></i> ویرایش</a></td> {% endcomment %}
                                    </tr>
                                {% endfor %}
                            {% endif %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>


    <div class="col-md-12">
        <div class="card">
            <div class="card-header">
                <h4 class="card-title">اطلاعات اعضای تیم</h4>
            </div>
            <div class="card-body">
                <div class="card-content">
                    <table class="table table-responsive-md mb-0 text-dark">
                        <thead>
                            <tr class="table-light">
                                {% if object.team_or_individual in "ta" %}
                                <th scope="col">نام و نام‌خانوادگی</th>
                                <th scope="col">هماهنگ کننده؟</th>
                                <th scope="col">مشاهده نتیجه پاسخ به</th>
                                {% else %}
                                <th scope="col">نام و نام‌خانوادگی</th>
                                <th scope="col">مشاهده نتیجه پاسخ به</th>
                                {% endif %}
                            </tr>
                        </thead>
                        <tbody>
                            {% if object.team_or_individual in "ta" %}
                                {% for member in object.team.team_of_team_member.all %}
                                <tr>
                                    <td class="">{{member.user.get_full_name}}</td>
                                    <td>
                                        {% if member.is_coordinator %}<span class="badge badge-success"><i class="feather icon-check"></i></span>{% else %}***{% endif %}
                                    </td>
                                    <td>
                                        <a href="" class="badge badge-primary">تست شخصیت</i></a>
                                    </td>
                                </tr>
                                {% endfor %}
                            {% else %}
                            <tr>
                                <td class="">{{object.user.get_full_name}}</td>
                                <td>
                                    <a href={% url "quiz:task-response-detail" object.road.uuid object.user.uuid %} class="badge badge-primary">چالش</i></a>
                                    <a href="" class="badge badge-primary">تست شخصیت</i></a>
                                </td>
                            </tr>
                            {% endif %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>


</div>
{% endblock main %}

{% block page_js %}
<script src={% static "admin-theme/app-assets/vendors/js/forms/select/select2.full.min.js" %}></script>
<script src={% static "admin-theme/app-assets/js/scripts/forms/select/form-select2.js" %}></script>
<script src={% static "admin-theme/app-assets/js/scripts/pages/faq-kb.js" %}></script>
{% endblock page_js %}